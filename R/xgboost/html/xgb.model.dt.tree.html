<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Parse a boosted tree model text dump</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for xgb.model.dt.tree {xgboost}"><tr><td>xgb.model.dt.tree {xgboost}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Parse a boosted tree model text dump</h2>

<h3>Description</h3>

<p>Parse a boosted tree model text dump into a <code>data.table</code> structure.
</p>


<h3>Usage</h3>

<pre>
xgb.model.dt.tree(feature_names = NULL, model = NULL, text = NULL,
  trees = NULL, use_int_id = FALSE, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>feature_names</code></td>
<td>
<p>character vector of feature names. If the model already
contains feature names, those would be used when <code>feature_names=NULL</code> (default value).
Non-null <code>feature_names</code> could be provided to override those in the model.</p>
</td></tr>
<tr valign="top"><td><code>model</code></td>
<td>
<p>object of class <code>xgb.Booster</code></p>
</td></tr>
<tr valign="top"><td><code>text</code></td>
<td>
<p><code>character</code> vector previously generated by the <code>xgb.dump</code> 
function  (where parameter <code>with_stats = TRUE</code> should have been set).
<code>text</code> takes precedence over <code>model</code>.</p>
</td></tr>
<tr valign="top"><td><code>trees</code></td>
<td>
<p>an integer vector of tree indices that should be parsed.
If set to <code>NULL</code>, all trees of the model are parsed.
It could be useful, e.g., in multiclass classification to get only
the trees of one certain class. IMPORTANT: the tree index in xgboost models
is zero-based (e.g., use <code>trees = 0:4</code> for first 5 trees).</p>
</td></tr>
<tr valign="top"><td><code>use_int_id</code></td>
<td>
<p>a logical flag indicating whether nodes in columns &quot;Yes&quot;, &quot;No&quot;, &quot;Missing&quot; should be
represented as integers (when FALSE) or as &quot;Tree-Node&quot; character strings (when FALSE).</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>currently not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> with detailed information about model trees' nodes.
</p>
<p>The columns of the <code>data.table</code> are:
</p>

<ul>
<li> <p><code>Tree</code>: integer ID of a tree in a model (zero-based index)
</p>
</li>
<li> <p><code>Node</code>: integer ID of a node in a tree (zero-based index)
</p>
</li>
<li> <p><code>ID</code>: character identifier of a node in a model (only when <code>use_int_id=FALSE</code>)
</p>
</li>
<li> <p><code>Feature</code>: for a branch node, it's a feature id or name (when available);
for a leaf note, it simply labels it as <code>'Leaf'</code>
</p>
</li>
<li> <p><code>Split</code>: location of the split for a branch node (split condition is always &quot;less than&quot;)
</p>
</li>
<li> <p><code>Yes</code>: ID of the next node when the split condition is met
</p>
</li>
<li> <p><code>No</code>: ID of the next node when the split condition is not met
</p>
</li>
<li> <p><code>Missing</code>: ID of the next node when branch value is missing
</p>
</li>
<li> <p><code>Quality</code>: either the split gain (change in loss) or the leaf value
</p>
</li>
<li> <p><code>Cover</code>: metric related to the number of observation either seen by a split
or collected by a leaf during training.
</p>
</li></ul>
 
<p>When <code>use_int_id=FALSE</code>, columns &quot;Yes&quot;, &quot;No&quot;, and &quot;Missing&quot; point to model-wide node identifiers
in the &quot;ID&quot; column. When <code>use_int_id=TRUE</code>, those columns point to node identifiers from 
the corresponding trees in the &quot;Node&quot; column.
</p>


<h3>Examples</h3>

<pre>
# Basic use:

data(agaricus.train, package='xgboost')

bst &lt;- xgboost(data = agaricus.train$data, label = agaricus.train$label, max_depth = 2, 
               eta = 1, nthread = 2, nrounds = 2,objective = "binary:logistic")

(dt &lt;- xgb.model.dt.tree(colnames(agaricus.train$data), bst))

# This bst model already has feature_names stored with it, so those would be used when 
# feature_names is not set:
(dt &lt;- xgb.model.dt.tree(model = bst))

# How to match feature names of splits that are following a current 'Yes' branch:

merge(dt, dt[, .(ID, Y.Feature=Feature)], by.x='Yes', by.y='ID', all.x=TRUE)[order(Tree,Node)]
 
</pre>

<hr /><div style="text-align: center;">[Package <em>xgboost</em> version 1.0.0.1 <a href="00Index.html">Index</a>]</div>
</body></html>
